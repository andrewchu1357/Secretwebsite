<!DOCTYPE html>
<html>
<head>
    <title>Neon Dash JS</title>
    <style>
        body { margin: 0; background: #111; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; color: white; font-family: sans-serif; }
        canvas { border: 2px solid #0ff; box-shadow: 0 0 20px #0ff; background: #000; }
        .info { position: absolute; top: 10px; text-align: center; width: 100%; }
    </style>
</head>
<body>
    <div class="info">Press <b>SPACE</b> or <b>TAP</b> to Jump</div>
    <canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

canvas.width = 800;
canvas.height = 400;

// --- Game Constants ---
const GRAVITY = 0.6;
const JUMP_FORCE = -10;
const GROUND_Y = 330;
let scrollSpeed = 5;

// --- Game State ---
let player = {
    x: 100, y: GROUND_Y - 30,
    w: 30, h: 30,
    velY: 0,
    isJumping: false
};

let obstacles = [ {x: 600}, {x: 1000}, {x: 1400}, {x: 1900} ];
let frameCount = 0;

function reset() {
    player.y = GROUND_Y - 30;
    player.velY = 0;
    player.isJumping = false;
    obstacles = [ {x: 600}, {x: 1000}, {x: 1400}, {x: 1900} ];
    frameCount = 0;
}

function update() {
    // Player Physics
    player.velY += GRAVITY;
    player.y += player.velY;

    if (player.y > GROUND_Y - player.h) {
        player.y = GROUND_Y - player.h;
        player.velY = 0;
        player.isJumping = false;
    }

    // Move Obstacles
    obstacles.forEach(obs => {
        obs.x -= scrollSpeed;
        
        // Collision Detection (Hitbox)
        if (player.x < obs.x + 25 && player.x + player.w > obs.x + 5 &&
            player.y + player.h > GROUND_Y - 35) {
            reset(); // Instant Feedback Loop
        }
    });

    // Loop obstacles for infinite play (optional)
    if(obstacles[0].x < -50) {
        obstacles.shift();
        obstacles.push({x: obstacles[obstacles.length-1].x + 400 + Math.random() * 200});
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw Ground
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(0, GROUND_Y);
    ctx.lineTo(canvas.width, GROUND_Y);
    ctx.stroke();

    // Draw Player (Neon Cube)
    ctx.fillStyle = "#0ff";
    ctx.shadowBlur = 15;
    ctx.shadowColor = "#0ff";
    ctx.fillRect(player.x, player.y, player.w, player.h);
    ctx.strokeStyle = "white";
    ctx.strokeRect(player.x, player.y, player.w, player.h);

    // Draw Obstacles (Spikes)
    ctx.fillStyle = "#f0f";
    ctx.shadowColor = "#f0f";
    obstacles.forEach(obs => {
        ctx.beginPath();
        ctx.moveTo(obs.x, GROUND_Y);
        ctx.lineTo(obs.x + 15, GROUND_Y - 35);
        ctx.lineTo(obs.x + 30, GROUND_Y);
        ctx.fill();
    });
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// Input Handling
window.addEventListener("keydown", (e) => {
    if (e.code === "Space" && !player.isJumping) {
        player.velY = JUMP_FORCE;
        player.isJumping = true;
    }
});

// Mobile Touch Support
window.addEventListener("touchstart", () => {
    if (!player.isJumping) {
        player.velY = JUMP_FORCE;
        player.isJumping = true;
    }
});

gameLoop();
</script>
</body>
</html>